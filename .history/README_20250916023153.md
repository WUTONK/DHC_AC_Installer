# DHC AC Installer - Electron + React + Go 应用程序

这是一个使用 Electron + React + Go (Gin) 构建的桌面应用程序示例，展示了前后端通信的最佳实践。

## 技术栈

- **前端**: Electron + React + TypeScript
- **后端**: Go + Gin 框架
- **通信方式**: HTTP API (RESTful)
- **数据格式**: JSON

## 项目结构

```
DHC_AC_Installer/
├── backend/                 # Go 后端服务
│   ├── main.go             # 主服务文件
│   └── go.mod              # Go 模块文件
├── DHC_Frontend/           # Electron + React 前端
│   ├── src/
│   │   ├── main/           # Electron 主进程
│   │   ├── preload/        # Electron 预加载脚本
│   │   └── renderer/       # React 渲染进程
│   │       ├── src/
│   │       │   ├── components/  # React 组件
│   │       │   ├── services/    # API 服务
│   │       │   └── App.tsx     # 主应用组件
│   │       └── index.html
│   ├── package.json
│   └── electron.vite.config.ts
└── README.md
```

## 前后端通信方案

### 1. HTTP API 通信（当前实现）

**优点：**
- 简单直接，易于理解和调试
- 支持跨平台
- 可以使用标准的 HTTP 客户端库
- 便于后续扩展为 Web 应用

**实现方式：**
- Go 后端运行在本地端口 11451
- React 前端通过 `axios` 调用 API
- Electron 主进程自动启动 Go 后端服务

### 2. API 端点

| 方法 | 路径 | 描述 |
|------|------|------|
| GET | `/health` | 健康检查 |
| GET | `/api/v1/users` | 获取用户列表 |
| POST | `/api/v1/users` | 创建用户 |
| GET | `/api/v1/users/:id` | 获取单个用户 |
| PUT | `/api/v1/users/:id` | 更新用户 |
| DELETE | `/api/v1/users/:id` | 删除用户 |

## 快速开始

### 前置要求

- Node.js (推荐 v18+)
- Go (推荐 v1.21+)
- pnpm (推荐)

### 安装依赖

1. 安装前端依赖：
```bash
cd DHC_Frontend
pnpm install
```

2. 安装后端依赖：
```bash
cd backend
go mod tidy
```

### 运行应用

#### 开发模式

1. 启动前端（会自动启动后端）：
```bash
cd DHC_Frontend
pnpm dev
```

#### 生产模式

1. 构建前端：
```bash
cd DHC_Frontend
pnpm build
```

2. 打包应用：
```bash
pnpm build:mac    # macOS
pnpm build:win    # Windows
pnpm build:linux  # Linux
```

## 功能特性

- ✅ 自动启动 Go 后端服务
- ✅ 实时后端状态监控
- ✅ 完整的用户管理 CRUD 操作
- ✅ 错误处理和用户反馈
- ✅ 响应式 UI 设计
- ✅ TypeScript 类型安全

## 开发说明

### 添加新的 API 端点

1. 在 `backend/main.go` 中添加新的路由和处理函数
2. 在 `DHC_Frontend/src/renderer/src/services/api.ts` 中添加对应的 API 方法
3. 在 React 组件中使用新的 API 方法

### 自定义后端端口

修改以下文件中的端口配置：
- `backend/main.go`: 修改 `r.Run(":11451")`
- `DHC_Frontend/src/renderer/src/services/api.ts`: 修改 `API_BASE_URL`

## 故障排除

### 后端服务无法启动

1. 确保已安装 Go 并配置了环境变量
2. 检查 `backend/` 目录下是否有 `go.mod` 文件
3. 运行 `go mod tidy` 安装依赖

### 前端无法连接后端

1. 检查后端服务是否在端口 11451 上运行
2. 查看 Electron 控制台是否有错误信息
3. 确认防火墙没有阻止本地连接

## 扩展建议

1. **数据库集成**: 使用 GORM 或原生 SQL 连接数据库
2. **身份验证**: 添加 JWT 或 Session 认证
3. **文件上传**: 支持文件上传和下载功能
4. **WebSocket**: 实现实时通信功能
5. **日志系统**: 添加结构化日志记录
6. **配置管理**: 使用配置文件管理应用设置

## 许可证

MIT License
