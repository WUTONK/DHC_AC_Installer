# DHC AC Installer 启动脚本使用说明

## 📋 脚本列表

本项目提供了以下启动脚本：

### 🚀 启动脚本
- `start_backend.sh` - 仅启动后端服务 (Go)
- `start_frontend.sh` - 仅启动前端应用 (Electron)
- `start_all.sh` - 同时启动前后端服务

### 🛑 停止脚本
- `stop_all.sh` - 停止所有服务

## 🛠️ 环境要求

### 后端要求
- Go 1.23.3 或更高版本
- 确保已安装所有 Go 依赖

### 前端要求
- Node.js (推荐 LTS 版本)
- pnpm 包管理器

安装 pnpm：
```bash
npm install -g pnpm
```

## 📖 使用方法

### 方法一：分别启动 (推荐开发时使用)

1. **启动后端服务**
   ```bash
   ./start_backend.sh
   ```
   - 后端服务将在 `http://127.0.0.1:19810` 运行

2. **启动前端应用** (新终端窗口)
   ```bash
   ./start_frontend.sh
   ```
   - 前端应用将启动 Electron 窗口

### 方法二：一键启动 (推荐生产环境)

```bash
./start_all.sh
```

这将：
- 自动检查环境
- 启动后端服务
- 启动前端应用
- 显示服务状态和日志位置
- 支持 Ctrl+C 优雅停止

### 停止服务

```bash
./stop_all.sh
```

## 📊 服务信息

- **后端服务**: `http://127.0.0.1:19810`
- **前端应用**: Electron 桌面应用
- **日志目录**: `./logs/`
  - `backend.log` - 后端服务日志
  - `frontend.log` - 前端应用日志
  - `backend_setup.log` - 后端依赖安装日志
  - `frontend_setup.log` - 前端依赖安装日志

## 🔧 故障排除

### 常见问题

1. **权限错误**
   ```bash
   chmod +x *.sh
   ```

2. **Go 未安装**
   - 访问 [Go 官网](https://golang.org/) 下载安装

3. **Node.js 未安装**
   - 访问 [Node.js 官网](https://nodejs.org/) 下载安装

4. **pnpm 未安装**
   ```bash
   npm install -g pnpm
   ```

5. **端口被占用**
   - 后端默认端口: 19810
   - 前端默认端口: 11451
   - 使用 `lsof -i :端口号` 查看占用情况

### 查看日志

```bash
# 查看后端日志
tail -f logs/backend.log

# 查看前端日志
tail -f logs/frontend.log
```

## 💡 开发建议

1. **开发模式**: 使用 `start_backend.sh` 和 `start_frontend.sh` 分别启动，便于调试
2. **测试模式**: 使用 `start_all.sh` 一键启动，模拟生产环境
3. **日志监控**: 开发时建议开启日志监控窗口
4. **优雅停止**: 使用 `stop_all.sh` 确保所有进程正确停止

## 📝 注意事项

- 首次运行会自动安装依赖，可能需要一些时间
- 确保网络连接正常，用于下载依赖包
- 如果遇到问题，请检查日志文件获取详细错误信息
- 脚本会自动创建 `logs` 目录存储日志文件
